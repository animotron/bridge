/*
* Kendo UI v2011.3.1129 (http://kendoui.com)
* Copyright 2011 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at http://kendoui.com/license.
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3. For GPL requirements, please
* review: http://www.gnu.org/copyleft/gpl.html
*/

(function(a,b){var c=window.kendo,d=c.ui,e=d.List,f=d.Select,g="click",h="disabled",i="change",j="k-state-default",k="k-state-disabled",l="k-state-focused",m="select",n="k-state-selected",o="filter",p="accept",q="k-state-hover",r="mouseenter mouseleave",s=null,t=a.proxy,u=f.extend({init:function(b,c){var d=this;c=a.isArray(c)?{dataSource:c}:c,f.fn.init.call(d,b,c),c=d.options,b=d.element.focus(function(){d.input.focus()}),d._reset(),d._wrapper(),d._input(),d._popup(),d._accessors(),d._dataSource(),d._enable(),d.bind([i],c),d.input.bind({keydown:t(d._keydown,d),focus:function(){d._inputWrapper.addClass(l)},blur:function(){d._bluring=setTimeout(function(){clearTimeout(d._typing),d.text(d.text()),d._blur(),d._inputWrapper.removeClass(l)},100)}}),d._old=d.value(),c.autoBind?d._select():b.is(m)&&d.input.val(b.children(":selected").text())},options:{name:"ComboBox",enable:!0,index:-1,autoBind:!0,delay:200,dataTextField:"text",dataValueField:"value",minLength:0,height:200,highlightFirst:!0,filter:"none",suggest:!1},current:function(a){var c=this,d=c._current;if(a===b)return d;c._selected=s,d&&d.removeClass(n),f.fn.current.call(c,a)},enable:function(a){var b=this,c=b.input,d=b.element,e=b._inputWrapper,f=b._arrow.parent();a===!1?(e.removeClass(j).addClass(k).unbind(r),c.add(d).attr(h,h),f.unbind(g)):(e.removeClass(k).addClass(j).bind(r,b._toggleHover),c.add(d).removeAttr(h),f.bind(g,function(){b.toggle()}))},open:function(){var a=this,b=a._selected;a.popup.visible()||(!a.ul[0].firstChild||a._state===p?(a._open=!0,a._state="",a._select()):(a.popup.open(),b&&a._scroll(b[0])))},refresh:function(){var b=this,d=b.ul,e=b.options,f=e.suggest,g=e.height,h=b._data(),i=h.length;d[0].innerHTML=c.render(b.template,h),b._height(i),b.element.is(m)&&b._options(h),i&&((f||e.highlightFirst)&&b.current(a(b.ul[0].firstChild)),f&&b.suggest(b._current)),b._open&&(b._open=!1,b.toggle(!!i)),b._hideBusy()},select:function(a){var c=this,d,e,f=c._highlight(a),g=c._data();f!==-1&&(c._selected=c._current.addClass(n),g=g[f],d=c._text(g),e=c._value(g),c._prev=c.input[0].value=d,c._accessor(e!=b?e:d,f))},search:function(a){var b=this,a=a||b.text(),c=a.length,d=b.options,e=d.filter;clearTimeout(b._typing),c>=d.minLength&&(e==="none"?b._filter(a):(b._open=!0,b._state=o,b.dataSource.filter({field:d.dataTextField,operator:e,value:a})))},suggest:function(a){var b=this,c=b.input[0],d=b.text(),f=e.caret(c);typeof a!="string"&&(a=a?a.text():""),f<=0&&(f=d.toLowerCase().indexOf(a.toLowerCase())+1),a||(a=d.substring(0,f)),a!==d&&(b.text(a),e.selectText(c,f,a.length))},text:function(a){var c=this,d=c.input[0];if(a!==b)c.select(function(b){return c._text(b)===a}),c._selected||c._custom(a),d.value=a;else return d.value},toggle:function(a){var b=this;clearTimeout(b._bluring),b.input[0].focus(),setTimeout(function(){b._toggle(a)})},value:function(a){var c=this,d,e=c.element;if(a!==b)d=c._index(a),d>-1?c.select(d):(c.current(s),c._custom(a),c.text(a)),c._old=c._accessor();else return c._accessor()},_accept:function(a){var b=this;a&&b.popup.visible()?(b._state===o&&(b._state=p),setTimeout(function(){b._focus(a)})):(b.text(b.text()),b._change())},_custom:function(b){var c=this,d=c.element,e=c._option;d.is(m)?(e||(e=c._option=a("<option/>"),d.append(e)),e.text(b),e[0].selected=!0):d.val(b)},_filter:function(a){var c=this,d=c.options,a=a.toLowerCase(),e=c.dataSource,f=function(d){var e=c._text(d);if(e!==b){e=e+"";if(e!==""&&a==="")return!1;return e.toLowerCase().indexOf(a)===0}};c.ul[0].firstChild?(c._highlight(f)!==-1&&(d.suggest&&c._current&&c.suggest(c._current),c.open()),c._hideBusy()):e.one(i,function(){c.search(a)}).fetch()},_highlight:function(c){var d=this,f;if(c==b)return-1;c=d._get(c),f=e.inArray(c[0],d.ul[0]),f==-1&&(d.options.highlightFirst&&!d.text()?c=a(d.ul[0].firstChild):c=s),d.current(c);return f},_input:function(){var b=this,c=b.element[0],d=b.wrapper,e=".k-input",f;f=d.find(e),f[0]||(d.append('<span class="k-dropdown-wrap k-state-default"><input class="k-input" type="text" autocomplete="off"/><span class="k-select"><span class="k-icon k-arrow-down">select</span></span></span>').append(b.element),f=d.find(e)),f[0].style.cssText=c.style.cssText,f.addClass(c.className).val(c.value).css({width:"100%",height:"auto"}).show(),b._focused=b.input=f,b._arrow=d.find(".k-icon"),b._inputWrapper=a(d[0].firstChild)},_keydown:function(a){var b=this;c.keys.TAB===a.keyCode?(b.text(b.input.val()),b._state===o&&b._selected&&(b._state=p)):b._move(a)||b._search()},_search:function(){var a=this;clearTimeout(a._typing),a._typing=setTimeout(function(){var b=a.text();a._prev!==b&&(a._prev=b,a.search(b))},a.options.delay)},_select:function(){var a=this;a.dataSource.one(i,function(){var b=a.value();b?a.value(b):a.select(a.options.index),a._old=a.value()}).query()},_wrapper:function(){var a=this,b=a.element,c;c=b.parent(),c.is("span.k-widget")||(c=b.hide().wrap("<span />").parent()),c[0].style.cssText=b[0].style.cssText,a.wrapper=c.addClass("k-widget k-combobox k-header").show()}});d.plugin(u)})(jQuery)